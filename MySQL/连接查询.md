### 准备表

现有a、b表

![image-20210709111322902](d:\Users\cuiyingfan\Desktop\secret\MySQL\img\temp1)

插入数据：

![image-20210709111425950](d:\Users\cuiyingfan\Desktop\secret\MySQL\img\temp2)

### 内连接JOIN（INNER JOIN）

```sql
SELECT
	a.id,
	a.`name`,
	b.aid,
	b.job 
FROM
	a
	JOIN b ON a.id = b.aid;
```

结果:

![image-20210709111615145](d:\Users\cuiyingfan\Desktop\secret\MySQL\img\temp3)

![img](d:\Users\cuiyingfan\Desktop\secret\MySQL\img\temp4)

### 左连接LEFT JOIN

```sql
SELECT
	a.id,
	a.`name`,
	b.aid,
	b.job 
FROM
	a
	LEFT JOIN b ON a.id = b.aid;
```

结果:

![image-20210709111757491](d:\Users\cuiyingfan\Desktop\secret\MySQL\img\temp5)

![img](d:\Users\cuiyingfan\Desktop\secret\MySQL\img\temp6)

### 右连接RIGHT JOIN

```sql
SELECT
	a.id,
	a.`name`,
	b.aid,
	b.job 
FROM
	a
	RIGHT JOIN b ON a.id = b.aid;
```

结果:

![image-20210709111931778](d:\Users\cuiyingfan\Desktop\secret\MySQL\img\temp7)

![img](d:\Users\cuiyingfan\Desktop\secret\MySQL\img\temp8)

### 全连接FULL JOIN

```sql
SELECT
	a.id,
	a.`name`,
	b.aid,
	b.job 
FROM
	a
	FULL OUTER JOIN b ON a.id = b.aid UNION
```

MySQL不支持全连接，用左连接UNION右连接的方式来实现全连接

```sql
SELECT
	a.id,
	a.`name`,
	b.aid,
	b.job 
FROM
	a
	LEFT JOIN b ON a.id = b.aid UNION
SELECT
	a.id,
	a.`name`,
	b.aid,
	b.job 
FROM
	a
	RIGHT JOIN b ON a.id = b.aid
```

![image-20210709113445426](d:\Users\cuiyingfan\Desktop\secret\MySQL\img\temp9)

![img](d:\Users\cuiyingfan\Desktop\secret\MySQL\img\temp10)

### In 和 Exists

```sql
select * from a where a.id in (select b.aid from b where b.aid is not null);

select * from a where exists(select b.aid from b where b.aid = a.id);
```



### with as

**with as 为声明一个临时表**

```sql
-- 声明临时表
with temp as (select b.aid, b.id from b where b.aid)
-- 用临时表来做子查询
select * from a where exists(select * from temp where temp.aid = a.id);
```

